
<img width="1918" height="1016" alt="image" src="https://github.com/user-attachments/assets/58e1d6bc-e8c0-4485-8c3b-ac5d7fd29cb9" />

# Day 8 – Urban: Cologne Synthetic Building‑Age Map

This folder contains the assets used for **Day 8 (Urban)** of the *30 Day Map Challenge 2025*.  The theme for this day was **Urban**, and the project focuses on visualising the age of buildings in the German city of Cologne (*Köln*).  Because OpenStreetMap (OSM) tags for construction year are incomplete, a script is provided that synthesises plausible building ages using district‑specific heuristics.  An interactive web map then uses these synthetic ages to colour building footprints and lets users explore how the city has developed over time.

## What’s in this folder?

| File | Description |
|---|---|
| **`generate_synthetic_building_age.py`** | Python script that downloads building footprints from the Overpass API for several Cologne districts and assigns each footprint a synthetic construction year.  It exports both **GeoJSON** and **CSV** files for further analysis or visualisation. |
| **`synthetic_building_age.csv`** | A CSV table generated by the script.  Each row contains the building’s `id`, the assigned `district`, the synthetic `year_built`, and the `year_range` (e.g. “1850‑1950”) used when picking the random year.  This file is included so you can explore the synthetic results without having to call the Overpass API yourself. |
| **`synthetic_building_age.geojson`** | GeoJSON file created by the script.  It contains the full polygon geometry for each building along with the synthetic year attributes (district, year built, year range, centroid coordinates, etc.).  If you need a ready‑to‑use spatial file for further GIS work, use this.  Note: the version in this repository is empty (it only defines an empty `features` array), because actual geometry is generated on the fly when the script runs. |
| **`Day_8_Urban_cologne_building_age_map.html`** | An interactive Leaflet map that loads OSM building footprints and colours them by year of construction.  When a building lacks a tagged construction year, the map assigns a synthetic year based on the district it falls in.  Users can filter buildings by maximum year (via a slider), adjust fill opacity, and export the current view to GeoJSON or CSV.  The map is also available online via the project’s GitHub Pages site (see the link in the root repository README). |
| **`test.txt`** | Placeholder file containing no data (1 byte).  It can be ignored. |

## Synthetic building‑age generation

The core of this project is the `generate_synthetic_building_age.py` script.  It uses Python 3 and only relies on the standard library.  The script performs the following steps:

1. **Define districts & year ranges.**  Four Cologne districts are configured with bounding boxes and plausible construction year ranges (e.g. Altstadt 1850‑1950, Ehrenfeld 1920‑1980).  Each district has a limit on the number of buildings to fetch.
2. **Fetch building footprints.**  For each district, the script queries the Overpass API and converts the returned OSM ways into a FeatureCollection.  Only polygons representing buildings are retained.
3. **Assign synthetic ages.**  For each building, the script calculates a centroid and then picks a random year within the district’s configured range.  Metadata is added (district name, synthetic year, year range, centroid coordinates) and the features are stored.
4. **Export results.**  All enriched features are saved to a GeoJSON file (`synthetic_building_age.geojson`) and a CSV file (`synthetic_building_age.csv`).  The CSV uses simple columns (`id`, `district`, `year_built`, `year_range`) for easier inspection or plotting.

**Important:** the synthetic years are random and **not authoritative**.  They are used solely for demonstration purposes.  For real analyses, you should use official construction year data or complete OSM tags.

### Running the script

1. **Prerequisites.**  Install Python 3.11+ and ensure you can access the internet (the script queries the Overpass API).  No third‑party packages are required.
2. **Run from the command line.**  From the root of the repository:
   ```bash
   python Day_8_Urban/generate_synthetic_building_age.py
   ```
   You may provide an optional integer seed to reproduce the random values:
   ```bash
   python Day_8_Urban/generate_synthetic_building_age.py 123
   ```
3. **Outputs.**  After running, you will find `synthetic_building_age.geojson` and `synthetic_building_age.csv` in the same folder.  These files will be overwritten each time you run the script.
4. **Customisation.**  You can adjust the districts or year ranges by editing the `DISTRICTS` list at the top of the script.  You can also change the `limit` per district to fetch more or fewer buildings.

## Interactive web map

The `Day_8_Urban_cologne_building_age_map.html` file is a standalone interactive map built with Leaflet.  When loaded in a browser (locally or via GitHub Pages), it:

- **Displays a dark basemap** and overlays building footprints coloured by year of construction.  Colours correspond to defined year classes (e.g. 1850–1900, 1930–1950, etc.).  Buildings without a known year are coloured dark and labelled as “synthetic/unknown” in the legend.
- **Loads data on demand.**  Clicking “Load OSM + Synthetic Ages” triggers a fetch of building footprints for the current map view from the Overpass API.  If a building has a tagged `year_built` value, that value is used; otherwise a synthetic year is assigned based on a rough district guess.
- **Filters by year.**  A slider allows you to display only buildings constructed on or before a chosen year.  Unknown/synthetic years can still be shown to provide context.
- **Adjusts opacity and auto‑reloading.**  You can change the fill opacity and toggle automatic reloading of data when panning the map.
- **Exports data.**  Buttons let you download the current view as GeoJSON or CSV files.  The CSV contains the building ID, year, whether the year is synthetic, district, and WKT geometry.

Open the HTML file directly in a modern web browser or visit the hosted version linked from the main repository README.

## Data sources & licensing

- **Building footprints:** retrieved live from **OpenStreetMap** via the Overpass API.  OSM data is © OpenStreetMap contributors and licensed under the [Open Database License](https://opendatacommons.org/licenses/odbl/).  When exporting or publishing derived data, be sure to attribute OSM and respect the licence.
- **Synthetic years:** randomly generated by this project for illustration only.  They **do not reflect actual construction dates**.

If you find errors or have suggestions, feel free to open an issue or pull request in the [30DayMapChallenge‑2025](https://github.com/ErtanOz/30DayMapChallenge-2025) repository.

